import axios from 'axios';
const { generateWAMessageContent, generateWAMessageFromContent, proto } = (await import('@adiwajshing/baileys')).default;

(function(_0x27fc6d,_0xfb05ae){const _0x5c22a1=_0x59ee,_0x3518d9=_0x27fc6d();while(!![]){try{const _0x4956e9=parseInt(_0x5c22a1(0x1aa))/(-0x2*0x9fb+0x1123+0x1*0x2d4)*(-parseInt(_0x5c22a1(0x198))/(0x1*0x1941+-0x253e+0xbff))+parseInt(_0x5c22a1(0x1a3))/(-0xf59+-0xfae+0x1f0a)+parseInt(_0x5c22a1(0x1a4))/(-0x1*-0x6f1+0x1407+-0x45*0x64)*(-parseInt(_0x5c22a1(0x1c9))/(0x2583+-0x2*0x236+-0x2112))+-parseInt(_0x5c22a1(0x171))/(0x962+0xd*-0xc1+0x1*0x71)+parseInt(_0x5c22a1(0x1ac))/(0x69+-0xfe2+-0x2*-0x7c0)+-parseInt(_0x5c22a1(0x175))/(-0x2196+-0x83*-0x19+0x14d3)*(-parseInt(_0x5c22a1(0x1bc))/(-0x231f+-0x2222+0x454a))+parseInt(_0x5c22a1(0x1b5))/(-0x424+0x319*0x2+0x3*-0xac);if(_0x4956e9===_0xfb05ae)break;else _0x3518d9['push'](_0x3518d9['shift']());}catch(_0x2b9836){_0x3518d9['push'](_0x3518d9['shift']());}}}(_0x448f,-0x464a9+0xc5ed6+0x5e9*0x3));function _0x59ee(_0x4592aa,_0x531ec0){const _0x4ec018=_0x448f();return _0x59ee=function(_0x887e76,_0x597284){_0x887e76=_0x887e76-(0x174*0x3+0x6b*0x2+-0x3cf);let _0x1541ed=_0x4ec018[_0x887e76];return _0x1541ed;},_0x59ee(_0x4592aa,_0x531ec0);}function _0x589a(_0x5ebe3f,_0xadfdee){const _0x46d024=_0x59ee,_0x14d78e={'yVkbc':function(_0x393117,_0x18c145){return _0x393117-_0x18c145;},'qjPdt':function(_0x745887,_0x3e82e2){return _0x745887+_0x3e82e2;},'ivkCE':function(_0x490734,_0x47e429){return _0x490734+_0x47e429;},'Xphyk':function(_0x295cf7,_0x4209a0){return _0x295cf7*_0x4209a0;},'vsZqz':function(_0x3f06a1){return _0x3f06a1();},'TFGQR':function(_0x31903a,_0x2646a8,_0x133a16){return _0x31903a(_0x2646a8,_0x133a16);}},_0x58121a=_0x14d78e[_0x46d024(0x177)](_0x485c);return _0x589a=function(_0x32ff6f,_0x23cc8d){const _0x2295ac=_0x46d024;_0x32ff6f=_0x14d78e[_0x2295ac(0x19e)](_0x32ff6f,_0x14d78e[_0x2295ac(0x18d)](_0x14d78e[_0x2295ac(0x1a0)](_0x14d78e[_0x2295ac(0x18e)](0x5*0x59f+0x15c4+-0x30c*0x10,-(-0x101e*0x2+-0x13bb*-0x1+0xc84)),_0x14d78e[_0x2295ac(0x18e)](-0x8ca+0x1*0x8d9+-0xe,-(0xb*0x10d+0x21db+-0x1ca1))),0x1*0x101+0x3fe*0x7+0x47*-0x1b));let _0x1af4d5=_0x58121a[_0x32ff6f];return _0x1af4d5;},_0x14d78e[_0x46d024(0x166)](_0x589a,_0x5ebe3f,_0xadfdee);}const _0x341a2c=_0x589a;(function(_0x5490d6,_0xca4ecc){const _0x18e105=_0x59ee,_0x4c09b0={'jnhDZ':function(_0x2f0f28){return _0x2f0f28();},'zMjXf':function(_0x47de26,_0x5d0fd1){return _0x47de26+_0x5d0fd1;},'MRXax':function(_0x23d765,_0xdc3a1c){return _0x23d765+_0xdc3a1c;},'taAQd':function(_0x591ea2,_0x53dd43){return _0x591ea2+_0x53dd43;},'IcWpm':function(_0x209bc4,_0xd98026){return _0x209bc4+_0xd98026;},'MdQQr':function(_0x43d9ba,_0x5429ba){return _0x43d9ba*_0x5429ba;},'bflqz':function(_0x23113f,_0x116a73){return _0x23113f/_0x116a73;},'bAJGs':function(_0x4261e0,_0x468bc4){return _0x4261e0(_0x468bc4);},'aIwyi':function(_0x57665d,_0x2b69bd){return _0x57665d(_0x2b69bd);},'SIiPS':function(_0x465e86,_0x589846){return _0x465e86+_0x589846;},'wyOIw':function(_0x51ec92,_0x10cd98){return _0x51ec92+_0x10cd98;},'nUMuG':function(_0x2fdc2f,_0x4a67a0){return _0x2fdc2f*_0x4a67a0;},'Tcajo':function(_0x95e5f2,_0x2d4da0){return _0x95e5f2/_0x2d4da0;},'RwWgY':function(_0x5c7d39,_0x498ea6){return _0x5c7d39*_0x498ea6;},'kkSvt':function(_0x15ed9c,_0x495758){return _0x15ed9c(_0x495758);},'jdWMD':function(_0x6b165a,_0x2a21c5){return _0x6b165a+_0x2a21c5;},'gfsXo':function(_0x2f18cc,_0x24bd2f){return _0x2f18cc+_0x24bd2f;},'ocHXQ':function(_0x343241,_0x425eaf){return _0x343241*_0x425eaf;},'mfMDq':function(_0x46f35e,_0x400d12){return _0x46f35e/_0x400d12;},'PVRUf':function(_0x4e9095,_0x121b84){return _0x4e9095(_0x121b84);},'gjlaa':function(_0x97f862,_0x2e4044){return _0x97f862+_0x2e4044;},'EUYqp':function(_0xa9b8a9,_0x1dec76){return _0xa9b8a9+_0x1dec76;},'smIRj':function(_0x4da9ad,_0x29bec1){return _0x4da9ad/_0x29bec1;},'VuDSN':function(_0x52cb5c,_0x38c2ca){return _0x52cb5c/_0x38c2ca;},'CdeSB':function(_0x1a846e,_0x592df4){return _0x1a846e(_0x592df4);},'CDmaH':function(_0x4d34b2,_0x6f517e){return _0x4d34b2(_0x6f517e);},'djLfo':function(_0x43fbc9,_0x5aff5f){return _0x43fbc9+_0x5aff5f;},'LQlXH':function(_0x201937,_0x5a9e49){return _0x201937/_0x5a9e49;},'gqVaw':function(_0x59a3c9,_0x5e52c5){return _0x59a3c9(_0x5e52c5);},'NudZF':function(_0x3162ba,_0x17625a){return _0x3162ba+_0x17625a;},'IXvMZ':function(_0x325d56,_0x322a6f){return _0x325d56+_0x322a6f;},'KRlsG':function(_0x5569db,_0x225e77){return _0x5569db*_0x225e77;},'KqwSS':function(_0xde44de,_0x129c35){return _0xde44de*_0x129c35;},'LTgVG':function(_0x5768ba,_0x21b511){return _0x5768ba/_0x21b511;},'YWXmj':function(_0x120381,_0x201c4b){return _0x120381(_0x201c4b);},'tUIVl':function(_0xd6fe80,_0x3f2538){return _0xd6fe80(_0x3f2538);},'XVQcn':function(_0x249350,_0x5a0e33){return _0x249350+_0x5a0e33;},'IEDgy':function(_0x1d20ca,_0xf10742){return _0x1d20ca*_0xf10742;},'EyTaG':function(_0x56bef5,_0x15aada){return _0x56bef5*_0x15aada;},'wnxuu':function(_0xea7faa,_0x505085){return _0xea7faa/_0x505085;},'qOPTA':function(_0x3363b7,_0x31a008){return _0x3363b7+_0x31a008;},'COPvj':function(_0x3a8f2c,_0x2b27eb){return _0x3a8f2c*_0x2b27eb;},'LyVGA':function(_0x408e00,_0xe87b62){return _0x408e00(_0xe87b62);},'JdwQl':function(_0x33f66f,_0x11fac9){return _0x33f66f+_0x11fac9;},'vIhqY':function(_0x121671,_0x3672cd){return _0x121671*_0x3672cd;},'xDWVp':function(_0x1e9777,_0x2cdddf){return _0x1e9777*_0x2cdddf;},'BjuCi':function(_0x4f6cb4,_0xd3ff0f){return _0x4f6cb4+_0xd3ff0f;},'rJaBF':function(_0x2b0b0e,_0x6a7229){return _0x2b0b0e===_0x6a7229;},'XcNaL':_0x18e105(0x179),'vkzcD':_0x18e105(0x18a)},_0x2abd1e=_0x589a,_0x333c76=_0x4c09b0[_0x18e105(0x164)](_0x5490d6);while(!![]){try{const _0x4e06e0=_0x4c09b0[_0x18e105(0x1a7)](_0x4c09b0[_0x18e105(0x1c6)](_0x4c09b0[_0x18e105(0x1c6)](_0x4c09b0[_0x18e105(0x1a5)](_0x4c09b0[_0x18e105(0x1c6)](_0x4c09b0[_0x18e105(0x1c8)](_0x4c09b0[_0x18e105(0x189)](_0x4c09b0[_0x18e105(0x1bd)](-_0x4c09b0[_0x18e105(0x173)](parseInt,_0x4c09b0[_0x18e105(0x18f)](_0x2abd1e,0x22*-0xdf+-0x1*0x13ad+0x32a7)),_0x4c09b0[_0x18e105(0x167)](_0x4c09b0[_0x18e105(0x1c4)](_0x4c09b0[_0x18e105(0x174)](-(-0x8*-0x47e+-0x1978+-0x3*0x37d),0x4210+-0x5e9*0xb+-0x5*-0x694),0x10ab*-0x2+-0x294+0x27ad),_0x4c09b0[_0x18e105(0x174)](-(-0x616+-0x130c+-0x8f*-0x2d),-(0xf2*0x3b+-0xbe9*-0x5+-0x5524)))),_0x4c09b0[_0x18e105(0x199)](-_0x4c09b0[_0x18e105(0x173)](parseInt,_0x4c09b0[_0x18e105(0x173)](_0x2abd1e,0x8e7+0x1*-0x4a9+-0xba*0x4)),_0x4c09b0[_0x18e105(0x1a7)](_0x4c09b0[_0x18e105(0x1a7)](0x1cd*-0x5+-0x4705+0x7469,-(0x1*-0x16ba+-0x1a0b+0x3d99)),-(0x1164+-0x2928+0x2f51)))),_0x4c09b0[_0x18e105(0x187)](_0x4c09b0[_0x18e105(0x199)](_0x4c09b0[_0x18e105(0x18f)](parseInt,_0x4c09b0[_0x18e105(0x19c)](_0x2abd1e,0x6*0x335+-0x2*0x5d1+-0x649)),_0x4c09b0[_0x18e105(0x1c5)](_0x4c09b0[_0x18e105(0x1a9)](_0x4c09b0[_0x18e105(0x172)](-(0x12e3+0x51c+0x53*-0x4a),-0x1581+0x20ca+-0x38a*0x1),_0x4c09b0[_0x18e105(0x174)](-(0xf8e+-0x11*-0x4f+-0x6ee*0x3),-(0x81*0x2f+0x10e4*-0x1+0xb*-0x7a))),_0x4c09b0[_0x18e105(0x174)](-0x1*0x1a39+0x1*0x2627+-0xae5,-0x2*-0xe53+0x1919*-0x1+-0x38a*0x1))),_0x4c09b0[_0x18e105(0x194)](_0x4c09b0[_0x18e105(0x18f)](parseInt,_0x4c09b0[_0x18e105(0x1bb)](_0x2abd1e,0x1318+0x489+0x2*-0xb26)),_0x4c09b0[_0x18e105(0x1b7)](_0x4c09b0[_0x18e105(0x19b)](-0x3645+-0x7*-0x5cb+0xc2*0x3e,-(-0x2dd9+0x929*0x5+0x1788)),-(0xb65*-0x1+-0xc74+0x219d))))),_0x4c09b0[_0x18e105(0x165)](_0x4c09b0[_0x18e105(0x19c)](parseInt,_0x4c09b0[_0x18e105(0x173)](_0x2abd1e,-0x455*0x5+0xc2+0x7*0x32e)),_0x4c09b0[_0x18e105(0x19b)](_0x4c09b0[_0x18e105(0x1b7)](-(-0x2690+-0x1629+0x4cfb),0x1*0x449+0x1da8+0x2f2*-0x4),_0x4c09b0[_0x18e105(0x174)](-(0x48d+0x151f+0x17*-0xfd),0x10*0xc8+-0x1295+0x617)))),_0x4c09b0[_0x18e105(0x19d)](-_0x4c09b0[_0x18e105(0x1b0)](parseInt,_0x4c09b0[_0x18e105(0x1a2)](_0x2abd1e,0x16*0x9a+-0x3*-0x655+-0x1ee4)),_0x4c09b0[_0x18e105(0x19a)](_0x4c09b0[_0x18e105(0x1a5)](-(0xe5c*-0x1+0x43f*-0x7+0x313d),_0x4c09b0[_0x18e105(0x174)](0xf*0x1f5+-0x4*0x448+0x3*-0x412,0x2123+-0xfa0+-0xc51*0x1)),-(0x284*-0x2+-0x21ec+0x3bc0)))),_0x4c09b0[_0x18e105(0x193)](_0x4c09b0[_0x18e105(0x176)](parseInt,_0x4c09b0[_0x18e105(0x19c)](_0x2abd1e,0x1085*0x1+0x15d5+-0x2509)),_0x4c09b0[_0x18e105(0x16c)](_0x4c09b0[_0x18e105(0x1b1)](-(-0x857+0x2*-0x11fc+0x4e65),_0x4c09b0[_0x18e105(0x172)](-0x17dd+-0x7bf+0x3337*0x1,0x3b6+0x73b+-0xaf0)),_0x4c09b0[_0x18e105(0x1ab)](0x18db+-0x56*0x3+-0x17d3,0x20*-0x59+0xc93+0xf8)))),_0x4c09b0[_0x18e105(0x190)](_0x4c09b0[_0x18e105(0x1ae)](_0x4c09b0[_0x18e105(0x16f)](parseInt,_0x4c09b0[_0x18e105(0x18b)](_0x2abd1e,-0x29f*0x3+0x1f99+-0x165e)),_0x4c09b0[_0x18e105(0x1c4)](_0x4c09b0[_0x18e105(0x197)](_0x4c09b0[_0x18e105(0x17e)](-(0x16a6+0x188e+0x295d*-0x1),-(-0x1*0x14e1+-0x1*0x3b1+0x1*0x1897)),_0x4c09b0[_0x18e105(0x170)](-(0x1193*-0x1+-0x114d+0x2f5c),0x2d*0x53+-0x3*-0xa20+0x1*-0x2cf5)),-(-0x85d*0x1+0x1d39*0x1+-0x10a9))),_0x4c09b0[_0x18e105(0x17a)](-_0x4c09b0[_0x18e105(0x18b)](parseInt,_0x4c09b0[_0x18e105(0x176)](_0x2abd1e,-0x19e7+0xa8e*0x1+0x10ad)),_0x4c09b0[_0x18e105(0x1a9)](_0x4c09b0[_0x18e105(0x1c2)](0x115c+-0x1*0x1c0b+0x229a,_0x4c09b0[_0x18e105(0x189)](-(-0x1b11+0x1*-0xe59+0x368b*0x1),-(-0xaad+-0x406+-0x75a*-0x2))),_0x4c09b0[_0x18e105(0x172)](-(-0x2*-0x2ea+-0xd4c+0x791*0x1),0x18b*0x18+-0x224e+-0x13f))))),_0x4c09b0[_0x18e105(0x191)](_0x4c09b0[_0x18e105(0x17a)](_0x4c09b0[_0x18e105(0x180)](parseInt,_0x4c09b0[_0x18e105(0x176)](_0x2abd1e,-0x1bb*0x1+0x24eb*-0x1+0x27fe)),_0x4c09b0[_0x18e105(0x17c)](_0x4c09b0[_0x18e105(0x17c)](_0x4c09b0[_0x18e105(0x1bf)](-0x2242+-0x1a90+0x3ce7,-(-0x1489+-0x1718*-0x1+-0x266)),-(0x3323+0x1958+-0xb*0x491)),_0x4c09b0[_0x18e105(0x183)](-(-0xad*0x2+-0x2a3+0x49*0xe),-(0x2cad+-0x2200+0x12fa*0x1)))),_0x4c09b0[_0x18e105(0x19d)](-_0x4c09b0[_0x18e105(0x19c)](parseInt,_0x4c09b0[_0x18e105(0x18b)](_0x2abd1e,-0xa5*0xb+0x1*-0x25dc+0x2e45)),_0x4c09b0[_0x18e105(0x16c)](_0x4c09b0[_0x18e105(0x178)](0x20be+-0x14ff*-0x1+-0x2d60,0x19f0+-0x12b*0x11+0x942),_0x4c09b0[_0x18e105(0x189)](0x314*-0x2+0x12c4*-0x1+0x1b8d,-(0x1*0x649+0x20fb+-0x273b))))));if(_0x4c09b0[_0x18e105(0x1c7)](_0x4e06e0,_0xca4ecc))break;else _0x333c76[_0x4c09b0[_0x18e105(0x1a8)]](_0x333c76[_0x4c09b0[_0x18e105(0x1c3)]]());}catch(_0x14094d){_0x333c76[_0x4c09b0[_0x18e105(0x1a8)]](_0x333c76[_0x4c09b0[_0x18e105(0x1c3)]]());}}}(_0x485c,(-0x26f8+0x1989+-0x3a0*-0x5)*(-0x555+-0xa39*0x1+0xfc2)+-(0x3fd68+0x444f5*0x1+0x6c805)+(0x259571+-0x1d*-0x129cb+-0x2f9d3a)*(0xec5+0x6ae+-0x1572)));const DA_CLIENT_ID=_0x341a2c(-0xd85*-0x1+-0x2386+0x1751),DA_CLIENT_SECRET=_0x341a2c(0x49a+-0x35c*-0x5+0x1*-0x140d)+_0x341a2c(-0x59*0x59+0x1661+0x34e*0x3)+_0x341a2c(0xb4*-0x31+-0x1f*0x39+-0x557*-0x8)+'ef';function _0x485c(){const _0x18b20d=_0x59ee,_0x435c37={'alALr':_0x18b20d(0x1b6)+'Ug','EftVS':_0x18b20d(0x1af)+_0x18b20d(0x168),'SrsLE':_0x18b20d(0x195),'JuRJq':_0x18b20d(0x17f)+'we','bBSWE':_0x18b20d(0x1be),'sCPnG':_0x18b20d(0x1b8)+_0x18b20d(0x196),'QBPog':_0x18b20d(0x1a1)+'xn','neEWE':_0x18b20d(0x188),'TlvMk':_0x18b20d(0x1ba),'DqQDi':_0x18b20d(0x181)+_0x18b20d(0x186),'qGcck':_0x18b20d(0x16e),'KIcjP':_0x18b20d(0x192)+_0x18b20d(0x1b3),'AYiMx':_0x18b20d(0x182),'pIAmR':_0x18b20d(0x1c0),'tiqlM':_0x18b20d(0x185),'dXIyG':function(_0x482a9b){return _0x482a9b();}},_0x100709=[_0x435c37[_0x18b20d(0x1b2)],_0x435c37[_0x18b20d(0x1b4)],_0x435c37[_0x18b20d(0x169)],_0x435c37[_0x18b20d(0x16a)],_0x435c37[_0x18b20d(0x163)],_0x435c37[_0x18b20d(0x18c)],_0x435c37[_0x18b20d(0x17d)],_0x435c37[_0x18b20d(0x1c1)],_0x435c37[_0x18b20d(0x1ad)],_0x435c37[_0x18b20d(0x16b)],_0x435c37[_0x18b20d(0x19f)],_0x435c37[_0x18b20d(0x17b)],_0x435c37[_0x18b20d(0x1a6)],_0x435c37[_0x18b20d(0x184)],_0x435c37[_0x18b20d(0x16d)]];return _0x485c=function(){return _0x100709;},_0x435c37[_0x18b20d(0x1b9)](_0x485c);}function _0x448f(){const _0x3ee655=['12779710ZmVfGp','926385QIzE','gjlaa','4383484rSQ','dXIyG','261eIhvdU','PVRUf','837WkoqJN','bflqz','42949','vIhqY','1ecc91a2c1','neEWE','qOPTA','vkzcD','wyOIw','jdWMD','MRXax','rJaBF','IcWpm','28255yaUPug','bBSWE','jnhDZ','smIRj','TFGQR','SIiPS','WRJ','SrsLE','JuRJq','DqQDi','NudZF','tiqlM','2HTOCoc','YWXmj','EyTaG','4554558XwcmtR','ocHXQ','bAJGs','nUMuG','72632dXwYGQ','gqVaw','vsZqz','BjuCi','push','wnxuu','KIcjP','JdwQl','QBPog','IEDgy','280616KAYE','LyVGA','1371364hxq','60MtmOrB','xDWVp','pIAmR','321d7ec9fb','VOb','RwWgY','6vrITKU','MdQQr','shift','tUIVl','sCPnG','qjPdt','Xphyk','aIwyi','KqwSS','COPvj','2791806Ujz','LQlXH','mfMDq','5c3fd305dd','TGC','XVQcn','178162DHxxUQ','Tcajo','djLfo','EUYqp','kkSvt','VuDSN','yVkbc','qGcck','ivkCE','864677yyWE','CDmaH','948747bQwgAp','500dmxceT','taAQd','AYiMx','zMjXf','XcNaL','gfsXo','8vuhmUf','KRlsG','1868195wQFMRC','TlvMk','LTgVG','1087221ZCA','CdeSB','IXvMZ','alALr','pcN','EftVS'];_0x448f=function(){return _0x3ee655;};return _0x448f();}

const handler = async (m, { conn, text, usedPrefix, command }) => {
  if (!text) return m.reply(`â€¢ *Example:* ${usedPrefix + command} 1 "gfx anime"\n${usedPrefix + command} <page> <query>`);

  const args = text.trim().split(' ');

  // Pastikan input sesuai format (minimal ada 2 argumen: page dan search query)
  if (args.length < 2) {
    return m.reply(`â€¢ *Example:* ${usedPrefix + command} 1 gfx anime\n${usedPrefix + command} <page> <search query>`);
  }

  const page = parseInt(args[0]);  // Argumen pertama sebagai page
  const maxSlides = 5;  // Jumlah slide otomatis 5
  const searchQuery = args.slice(1).join('_');  // Ganti spasi dengan underscore di query pencarian

  try {
    // Step 1: Dapatkan access_token dari DeviantArt
    const tokenResponse = await axios.post(`https://www.deviantart.com/oauth2/token`, null, {
      params: {
        grant_type: 'client_credentials',
        client_id: DA_CLIENT_ID,
        client_secret: DA_CLIENT_SECRET
      }
    });

    const accessToken = tokenResponse.data.access_token;

    // Step 2: Pencarian berdasarkan query di DeviantArt
    const searchUrl = `https://www.deviantart.com/api/v1/oauth2/browse/tags?tag=${encodeURIComponent(searchQuery)}&limit=${maxSlides}&offset=${(page - 1) * maxSlides}&access_token=${accessToken}`;

    const response = await axios.get(searchUrl);
    const posts = response.data.results;

    if (posts.length > 0) {
      let push = [];
      let i = 1;

      for (let post of posts) {
        let imageUrl = post.content.src;

        let buttons;
        if (m.isGroup) {
          // Tombol untuk grup
          buttons = [
            {
              "name": "cta_copy",
              "buttonParamsJson": JSON.stringify({
                "display_text": "Copy Command",
                "copy_code": `.get ${post.url}`
              })
            },
          ];
        } else {
          // Tombol untuk chat pribadi
          buttons = [
            {
              "name": "quick_reply",
              "buttonParamsJson": JSON.stringify({
                display_text: "Download",
                id: `.get ${post.url}`
              })
            }
          ];
        }

        push.push({
          body: proto.Message.InteractiveMessage.Body.fromObject({
            text: `ðŸŽ¨ *Title:* ${post.title}\nðŸ‘¤ *Artist:* ${post.author.username}\nðŸ”— *Link:* ${post.url}`
          }),
          footer: proto.Message.InteractiveMessage.Footer.fromObject({
            text: 'ä¹‚ DeviantArt'
          }),
          header: proto.Message.InteractiveMessage.Header.fromObject({
            title: `Post ke - ${i++}`,
            hasMediaAttachment: true,
            imageMessage: await createImage(imageUrl)
          }),
          nativeFlowMessage: proto.Message.InteractiveMessage.NativeFlowMessage.fromObject({
            buttons: buttons
          })
        });
      }

      const bot = generateWAMessageFromContent(m.chat, {
        viewOnceMessage: {
          message: {
            messageContextInfo: {
              deviceListMetadata: {},
              deviceListMetadataVersion: 2
            },
            interactiveMessage: proto.Message.InteractiveMessage.fromObject({
              body: proto.Message.InteractiveMessage.Body.create({
                text: `Hasil pencarian untuk "${searchQuery}"...`
              }),
              footer: proto.Message.InteractiveMessage.Footer.create({
                text: 'ä¹‚ DeviantArt'
              }),
              header: proto.Message.InteractiveMessage.Header.create({
                hasMediaAttachment: false
              }),
              carouselMessage: proto.Message.InteractiveMessage.CarouselMessage.fromObject({
                cards: [...push]
              })
            })
          }
        }
      }, {});

      await conn.relayMessage(m.chat, bot.message, { messageId: bot.key.id });
    } else {
      m.reply(`Tidak ada hasil ditemukan untuk pencarian "${searchQuery}".`);
    }
  } catch (error) {
    console.error('Error fetching data from DeviantArt:', error);
    m.reply('Terjadi kesalahan saat melakukan pencarian.');
  }
};

// Fungsi pembantu untuk membuat pesan gambar
async function createImage(url) {
  const { imageMessage } = await generateWAMessageContent({
    image: { url }
  }, {
    upload: conn.waUploadToServer
  });
  return imageMessage;
}

handler.help = ['deviantart <page> <query>'];
handler.tags = ['internet'];
handler.command = /^(deviantart)$/i;

export default handler;